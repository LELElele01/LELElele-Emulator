var head_negative = {
	sc: ["#N算什么？", "胡说八道！","#N#B无耻！","#N#B是原则性问题,怎么能讨论呢！","???","我要打#N！","让我先看看新闻。","都说不发表意见了……", "我不给#N#B,你记住了。"],
	tc: ["#N算什麼？", "胡說八道！","#N#B無恥！","#N#B是原則性問題,怎麼能討論呢！","???","我要打#N！","讓我先看看新聞。","都說不發表意見了……", "我不給#N#B,你記住了。"]
}

var sentence_negative = {
	sc: ["规则不是人定的,#N#B的行为是在乱定规则。","我的政敌越来越多。","还不能说#N是#B人了？","我的政敌越来越多。","看来#N既不唯心也不唯物。","我请#N记住,真理是不能讨论的。","#N是国家的走狗。","我就不信了,#N敢#B！","#N怎么能按人数#B呢？","#N就像国企一样剥削人民。","这种事是要总理第一时间赶到现场,而不是#N#B。", "你你你……","#N讲的不清不楚。","#N像毛一样死了。","#N用自己的言论和自己说#B吧！","#N怎么不说美国的#B？！","#N#B,但我只想跟随全国人民的脚步。","#N出了问题要负责的。","坐车不按人数,#N也不能#B。","这种时候#N应该写社论振奋人心，不应该#B。","原来如此,#N讲的不清不楚。"],
	tc: ["規則不是人定的,#N#B的行為是在亂定規則。","我的政敵越來越多。","還不能說#N是#B人了？","我的政敵越來越多。","看來#N既不唯心也不唯物。","我請#N記住,真理是不能討論的。","#N是國家的走狗。","我就不信了,#N敢#B！","#N怎麼能按人數#B呢？","#N就像國企一樣剝削人民。","這種事是要總理第一時間趕到現場,而不是#N#B。", "你你你……","#N講的不清不楚。","#N像毛一樣死了。","#N用自己的言論和自己說#B吧！","#N怎麼不說美國的#B？！","#N#B,但我只想跟隨全國人民的腳步。","#N出了問題要負責的。","坐車不按人數,#N也不能#B。","這種時候#N應該寫社論振奮人心，不應該#B。","原來如此,#N講的不清不楚。"]
}

var head_positive = {
	sc: ["对于#N#B的行为,说不好吧,也不太好。说好吧,也不太好。所以就说好了。","???","让我先看看新闻。","让我先看看新闻。","#N现在是#B啊,我怎么能不支持。","让我先看看新闻。"],
	tc: ["對於#N#B的行為,說不好吧,也不太好。說好吧,也不太好。所以就說好了。","???","讓我先看看新聞。","讓我先看看新聞。","#N現在是#B啊,我怎麼能不支持。","讓我先看看新聞。"]
}

var sentence_positive = {
	sc: ["#N不#B,大陆与台湾就无法和平统一。","#B越多#B越快越好。","#N#B说明他们没有生产资料公有制,很好。","我无话可说啊,还没处理完外交事务。","#N#B,已经被#N政府的人民钦定了！","#N再不#B我就看春晚了。","这是#N团结一心的表现,为了保证地方行政区稳定地#B。", "总书记第一时间就做出了指示。","#B是战略。","只有#N可以#B。","这是另一种表现,因为#N为全国人民已经做出来巨大牺牲。", "没有资产阶级,也没有#N#B。","这种事是要#N第一时间#B。","我什么都没说。","#N是为了中国的外交而#B的。","快快快。","我沉默就完了。","#N不#B就要武统。"],
	tc: ["#N不#B,大陸與台灣就無法和平統一。","#B越多#B越快越好。","#N#B說明他們沒有生產資料公有製,很好。","我無話可說啊,還沒處理完外交事務。","#N#B,已經被#N政府的人民欽定了！","#N再不#B我就看春晚了。","這是#N團結一心的表現,為了保證地方行政區穩定地#B。", "總書記第一時間就做出了指示。","#B是戰略。","只有#N可以#B。","這是另一種表現,因為#N為全國人民已經做出來巨大犧牲。", "沒有資產階級,也沒有#N#B。","這種事是要#N第一時間#B。","我什麼都沒說。","#N是為了中國的外交而#B的。","快快快。","我沉默就完了。","#N不#B就要武統。"]
}

var verb = {
	sc: ["通过", "签署", "资助", "承认", "否认", "推出", "退出", "拒绝", "谴责", "举报", "宣称", "下令", "煽动", "组织", "挑衅", "参与", "嘲讽", "退出"],
	tc: ["通過", "簽署", "資助", "承認", "否認", "推出", "退出", "拒絕", "譴責", "舉報", "宣稱", "下令", "煽動", "組織", "挑釁", "参与", "嘲諷", "退出"]
}

var ob = {
	sc: ["修正主义", "送中条例", "时代革命", "五大诉求", "封城", "独立公投", "网络二十三条", "三罢运动", "互联网自由运动", "言论自由", "冠状病毒", "武力清场", "篡改历史", "删除语录", "屠杀沙雕", "拆墙协定", "中央集权制度", "社会主义理论", "再次全票当选","文革遗风"],
	tc: ["修正主義", "送中條例", "時代革命", "五大訴求", "封城", "獨立公投", "網絡二十三條", "三罷運動", "互聯網自由運動", "言論自由", "冠狀病毒", "武力清場", "篡改歷史", "刪除語錄", "屠殺沙雕", "拆牆協定", "中央集權制度", "社會主義理論", "再次全票當選","文革遺風"]
}

var countries = {
	sc: "蔡英文、韩国瑜、宋楚瑜、习近平、邓小平、毛泽东、江泽民、希特勒、墨索里尼、马克思、恩格斯、川普、林郑月娥、赵紫阳、林彪、黄之峰、香港警察".split("、"),
	tc: "蔡英文、韓國瑜、宋楚瑜、習近平、鄧小平、毛澤東、江澤民、希特勒、墨索里尼、馬克思、恩格斯、川普、林鄭月娥、趙紫陽、林彪、黃之峰、香港警察".split("、")
}

var head, sentences, lang;

function shuffle(sentences){
    for (var i =sentences.length/2;i>0;i--){
        var random_pos=Math.floor(Math.random()*i)
        var tmp=sentences[i-1]
        sentences[i-1]=sentences[random_pos]
        sentences[random_pos]=tmp
    }
}


function LELElele01(n, b) {
    paragraphs = Math.floor((Math.random() * 2 + 2))
    var i
    var answer = ""
    var index = Math.floor((Math.random() * head.length))
    answer += head[index]
    shuffle(sentences)
    index=0
    for (i = 0; i < paragraphs; i++) {
        length = Math.floor((Math.random() * 2 + 4))
        for (j = 0; j < length; j++) {
            answer += sentences[index++]
        }
        answer += "<br><br>"
    }
    answer = answer.replace(/#N/g, n)
    answer = answer.replace(/#B/g, b)
    return answer
}

function generate() {
    var text = document.getElementById("text")
    var n = document.getElementById("1").value
    var b = document.getElementById("2").value
    var attitude = getRadioButtonCheckedValue("attitude")
    if(attitude == "support") {
        head = head_positive[lang]
        sentences = sentence_positive[lang]
    }
    else if(attitude == "condemn") {
        head = head_negative[lang]
        sentences = sentence_negative[lang]
    }

    if (n.length === 0 || b.length === 0) {

    } else {
        while (text.hasChildNodes()) {
            text.removeChild(text.firstChild)
        }
        var s = document.createElement("p")
        s.innerHTML = lang === "sc" ? "<b>香港记者：</b>" + n + b + "，王佳乐主席你觉得好不好啊？" + "<br/><br/>"+"<b>王佳乐主席：</b>"+"先让我组织一下语言……" : "<b>香港記者：</b>" + n + b + "，王佳乐主席你覺得好不好啊？" + "<br/><br/>"+"<b>王佳乐主席：</b>"+"先讓我組織一下語言……" 
        document.getElementById("text").appendChild(s)
        var t = document.createElement("p")
        t.innerHTML = LELElele01(n, b)
        document.getElementById("text").appendChild(t)
    }
}

function pick(items) {
    return items[Math.floor(Math.random() * items.length)]
}

function random() {
    document.getElementById("2").value = pick(verb[lang]) + pick(ob[lang])
    document.getElementById("1").value = pick(countries[lang])
    generate()
}

function getRadioButtonCheckedValue(tagNameAttr) {
    var radio_tag = document.getElementsByName(tagNameAttr);
    for(var i=0;i<radio_tag.length;i++) {
        if(radio_tag[i].checked) {
            var checkvalue = radio_tag[i].value;            
            return checkvalue;
        }
    }
}

function changeLang(value) {
    lang = value;
    localStorage.setItem("lang", lang);
    random()
    renderText()
}

function renderText() {
    var labelLang = document.getElementById("label-lang")
    labelLang.innerText = (lang === "sc") ? "语言" : "語言"

    var labelN = document.getElementById("label-n")
    labelN.innerText = (lang === "sc") ? "发言对象：" : "發言對象："

    var labelB = document.getElementById("label-b")
    labelB.innerText = (lang === "sc") ? "对方干了什么事情：" : "對方幹了什麼事情："

    var labelAttitude = document.getElementById("label-attitude")
    labelAttitude.innerText = (lang === "sc") ? "态度：" : "態度："

    var labelSupport = document.getElementById("label-support")
    labelSupport.innerText = (lang === "sc") ? "支持" : "支持"

    var labelCondemn = document.getElementById("label-condemn")
    labelCondemn.innerText = (lang === "sc") ? "谴责" : "譴責"

    var btnGenerate = document.getElementById("btn-generate")
    btnGenerate.innerText = (lang === "sc") ? "王主席怒斥香港记者" : "王主席怒斥香港記者"
}

lang = localStorage.getItem("lang") ? localStorage.getItem("lang") : "sc"
document.querySelectorAll("#lang option[value='"+lang+"']")[0].setAttribute("selected", true)

renderText()
random()
